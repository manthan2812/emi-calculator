(function(){"use strict";const R=(a,i,t)=>{if(i===0)return a/(t*12);const c=i/100/12,o=t*12,s=Math.pow(1+c,o);return a*c*s/(s-1)},u=(a,i,t,c)=>{const o=t*12;if(i===0){const r=a/o,y=new Array(o),N=new Array(t);let e=a;for(let n=0;n<o;n++)y[n]={openingBalance:e,principalPaid:r,interestPaid:0,closingBalance:e-r},e-=r;for(let n=0;n<t;n++){const _=n*12;N[n]={openingBalance:n===0?a:y[_].openingBalance,principalPaid:r*12,interestPaid:0,closingBalance:y[Math.min((n+1)*12-1,o-1)].closingBalance}}return[y,N]}const s=i/100/12,m=new Array(o),p=new Array(t);let l=a,I=0,E=0;const M=new Float64Array(12),O=new Float64Array(12);for(let r=0;r<t;r++){const y=r*12,N=l;for(let e=0;e<12;e++){const n=y+e,_=l*s,A=c-_;M[e]=_,O[e]=A,m[n]={openingBalance:l,principalPaid:A,interestPaid:_,closingBalance:l-A},l-=A}I=O.reduce((e,n)=>e+n,0),E=M.reduce((e,n)=>e+n,0),p[r]={openingBalance:N,principalPaid:I,interestPaid:E,closingBalance:l}}return[m,p]};self.onmessage=a=>{const{type:i,data:t}=a.data;switch(i){case"emi":const c=R(t.principal,t.interestRate,t.loanTerm);self.postMessage({type:"emi",result:c});break;case"amortization":const[o,s]=u(t.principal,t.interestRate,t.loanTerm,t.emiValue);self.postMessage({type:"amortization",result:[o,s]});break}}})();
